{
  "version": 3,
  "sources": ["../../src/pylontech/ConsolenReader.ts"],
  "sourcesContent": ["import debug from \"debug\";\nimport { Transform } from \"stream\";\n\nconst debugApi = debug(\"pylontech:api\");\n\nexport class ConsolenReader extends Transform {\n    protected _buffer: Buffer;\n    constructor() {\n        super({});\n        this._buffer = Buffer.alloc(0);\n        debugApi(\"MyParser.constructor\");\n    }\n\n    _transform(chunk: Buffer, encoding: string, cb: () => void): void {\n        debugApi(\"MyParser._transform\", \"chunk\", chunk.toString(\"hex\"), \"encoding\", encoding);\n        let data: Buffer = Buffer.concat([this._buffer, chunk]);\n        let position: number;\n        let start: number;\n        if ((position = data.lastIndexOf(\"[Enter]\")) !== -1) {\n            data.write(\"-------\", position);\n            this.emit(\"needsenddata\", \"\\r\");\n        }\n        while ((position = data.lastIndexOf(\"$$\")) !== -1) {\n            if ((start = data.lastIndexOf(\">\", position)) !== -1) {\n                this.push(data.subarray(start, position - 1));\n            }\n            data = data.subarray(position + 2);\n        }\n        this._buffer = data;\n        cb();\n    }\n\n    _flush(cb: () => void): void {\n        debugApi(\"MyParser._flush\");\n        this.push(this._buffer);\n        this._buffer = Buffer.alloc(0);\n        cb();\n    }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAkB;AAClB,oBAA0B;AAE1B,MAAM,eAAW,aAAAA,SAAM,eAAe;AAE/B,MAAM,uBAAuB,wBAAU;AAAA,EAE1C,cAAc;AACV,UAAM,CAAC,CAAC;AACR,SAAK,UAAU,OAAO,MAAM,CAAC;AAC7B,aAAS,sBAAsB;AAAA,EACnC;AAAA,EAEA,WAAW,OAAe,UAAkB,IAAsB;AAC9D,aAAS,uBAAuB,SAAS,MAAM,SAAS,KAAK,GAAG,YAAY,QAAQ;AACpF,QAAI,OAAe,OAAO,OAAO,CAAC,KAAK,SAAS,KAAK,CAAC;AACtD,QAAI;AACJ,QAAI;AACJ,SAAK,WAAW,KAAK,YAAY,SAAS,OAAO,IAAI;AACjD,WAAK,MAAM,WAAW,QAAQ;AAC9B,WAAK,KAAK,gBAAgB,IAAI;AAAA,IAClC;AACA,YAAQ,WAAW,KAAK,YAAY,IAAI,OAAO,IAAI;AAC/C,WAAK,QAAQ,KAAK,YAAY,KAAK,QAAQ,OAAO,IAAI;AAClD,aAAK,KAAK,KAAK,SAAS,OAAO,WAAW,CAAC,CAAC;AAAA,MAChD;AACA,aAAO,KAAK,SAAS,WAAW,CAAC;AAAA,IACrC;AACA,SAAK,UAAU;AACf,OAAG;AAAA,EACP;AAAA,EAEA,OAAO,IAAsB;AACzB,aAAS,iBAAiB;AAC1B,SAAK,KAAK,KAAK,OAAO;AACtB,SAAK,UAAU,OAAO,MAAM,CAAC;AAC7B,OAAG;AAAA,EACP;AACJ;",
  "names": ["debug"]
}
